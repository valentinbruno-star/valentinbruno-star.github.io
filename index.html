<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Verificador de For√ßa da Senha</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #f3f4f6;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .container {
    background: #fff;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    width: 360px;
    box-sizing: border-box;
  }

  h2 {
    text-align: center;
    color: #222;
    margin: 0 0 18px 0;
  }

  .field { position: relative; width: 100%; }

  input[type="password"],
  input[type="text"] {
    width: 100%;
    padding: 12px 44px 12px 12px;
    border: 1px solid #ccc;
    border-radius: 8px;
    outline: none;
    font-size: 15px;
    box-sizing: border-box;
  }

  .eye-icon {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    font-size: 18px;
    color: #6b210f;
    transition: color 0.15s;
    user-select: none;
  }
  .eye-icon:hover { color: #000; }

  .progress { height: 8px; background: #e5e7eb; border-radius: 999px; margin-top: 12px; overflow: hidden; }
  .bar { height: 100%; width: 0%; transition: width 0.3s ease; background: linear-gradient(90deg, #f97316, #16a34a); }

  .strength { margin-top: 12px; font-weight: 700; text-align: center; min-height: 1.25em; }
  .fraca { color: #dc2626; }
  .media { color: #f97316; }
  .forte { color: #16a34a; }
  .muito { color: #0f766e; }
  .lendaria { color: #7c3aed; text-shadow: 0 0 4px #c4b5fd; }

  ul { margin-top: 10px; font-size: 14px; color: #374151; padding-left: 18px; }
  li { margin-bottom: 5px; }
  .hint-strong { font-size: 13px; color: #374151; margin-top: 6px; text-align:center; }
</style>
</head>
<body>
  <div class="container">
    <h2>Verificador de Senha</h2>

    <div class="field">
      <input id="senha" type="password" placeholder="Digite sua senha..." oninput="verificarSenha()" autocomplete="new-password" />
      <span id="toggleSenha" class="eye-icon" onclick="toggleSenha()" title="Mostrar/ocultar senha">üëÅÔ∏è</span>
    </div>

    <div class="progress" aria-hidden="true"><div id="bar" class="bar"></div></div>
    <div id="resultado" class="strength" aria-live="polite"></div>
    <div id="extraHint" class="hint-strong"></div>
    <ul id="dicas" aria-live="polite"></ul>
  </div>

<script>
  const commonPasswords = [
    "123456","123456789","password","12345678","qwerty","abc123",
    "111111","1234567","iloveyou","admin","letmein","welcome","monkey","login","starwars"
  ];

  const commonWords = ["senha","password","love","gato","dog","admin","user","test"];

  function toggleSenha() {
    const input = document.getElementById('senha');
    const icon = document.getElementById('toggleSenha');
    if (input.type === 'password') {
      input.type = 'text';
      icon.textContent = 'üö´';
    } else {
      input.type = 'password';
      icon.textContent = 'üëÅÔ∏è';
    }
    input.focus();
    const len = input.value.length;
    input.setSelectionRange(len, len);
  }

  function hasSequentialPattern(s, minLen = 4) {
    if (!s || s.length < minLen) return false;
    const seqChars = s.toLowerCase();
    for (let i = 0; i <= seqChars.length - minLen; i++) {
      let asc = true, desc = true;
      for (let j = 1; j < minLen; j++) {
        if (seqChars.charCodeAt(i + j) !== seqChars.charCodeAt(i + j - 1) + 1) asc = false;
        if (seqChars.charCodeAt(i + j) !== seqChars.charCodeAt(i + j - 1) - 1) desc = false;
      }
      if (asc || desc) return true;
    }
    return false;
  }

  function hasLongRepeats(s, minRepeat = 4) {
    if (!s || s.length < minRepeat) return false;
    let count = 1;
    for (let i = 1; i < s.length; i++) {
      if (s[i] === s[i-1]) {
        count++;
        if (count >= minRepeat) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  // Nova fun√ß√£o: detecta originalidade criativa da senha
  function isCreativePassword(senha) {
    if (senha.length < 10) return false;

    const lower = senha.toLowerCase();

    // n√£o conter palavras reais do dicion√°rio b√°sico
    const temPalavraComum = commonWords.some(w => lower.includes(w));
    if (temPalavraComum) return false;

    // conter mistura incomum de tipos
    const temMaiuscula = /[A-Z]/.test(senha);
    const temMinuscula = /[a-z]/.test(senha);
    const temNumero = /\d/.test(senha);
    const temSimbolo = /[^A-Za-z0-9\s]/.test(senha);

    const mistura = [temMaiuscula, temMinuscula, temNumero, temSimbolo].filter(Boolean).length >= 3;

    // presen√ßa de padr√µes personalizados (ex: emojis, palavras invertidas)
    const temEmoji = /[\u{1F600}-\u{1F64F}]/u.test(senha);
    const invertida = senha.split('').reverse().join('');
    const √©Sim√©trica = senha === invertida;

    return mistura && !√©Sim√©trica && (temEmoji || senha.length > 12);
  }

  function verificarSenha() {
    const senha = document.getElementById("senha").value || "";
    const resultado = document.getElementById("resultado");
    const dicas = document.getElementById("dicas");
    const bar = document.getElementById("bar");
    const extraHint = document.getElementById("extraHint");

    let pontos = 0;
    const listaDicas = [];

    if (senha.length >= 8) pontos += 1;
    else listaDicas.push("Use pelo menos 8 caracteres.");

    if (/[A-Z]/.test(senha)) pontos += 1;
    else listaDicas.push("Adicione letras mai√∫sculas (A-Z).");

    if (/[a-z]/.test(senha)) pontos += 1;
    else listaDicas.push("Inclua letras min√∫sculas (a-z).");

    if (/\d/.test(senha)) pontos += 1;
    else listaDicas.push("Adicione n√∫meros (0-9).");

    if (/[^A-Za-z0-9\s]/.test(senha)) pontos += 1;
    else listaDicas.push("Inclua caracteres especiais (@, #, $, %, &, *).");

    if (senha.length === 0) {
      resultado.textContent = "";
      resultado.className = "strength";
      dicas.innerHTML = "";
      bar.style.width = "0%";
      extraHint.textContent = "";
      return;
    }

    const lower = senha.toLowerCase();
    const isCommon = commonPasswords.includes(lower);
    const hasSeq = hasSequentialPattern(senha, 4) || /(?:qwerty|asdf|zxcv)/i.test(senha);
    const hasRepeat = hasLongRepeats(senha, 4);
    let bonus = 0;

    if (!isCommon && !hasSeq && !hasRepeat && senha.length >= 12) bonus = 1;

    // Condi√ß√£o criativa de originalidade
    let bonusCriativo = 0;
    if (isCreativePassword(senha)) bonusCriativo = 1;

    const pontosTotais = pontos + bonus + bonusCriativo;
    const percent = Math.round((pontosTotais / 7) * 100);
    bar.style.width = percent + "%";

    if (pontosTotais <= 2) {
      resultado.textContent = "Senha Fraca üî¥";
      resultado.className = "strength fraca";
      extraHint.textContent = "";
    } else if (pontosTotais <= 4) {
      resultado.textContent = "Senha M√©dia üü†";
      resultado.className = "strength media";
      extraHint.textContent = "";
    } else if (pontosTotais === 5) {
      resultado.textContent = "Senha Forte üü¢";
      resultado.className = "strength forte";
      extraHint.textContent = "√ìtimo! Mas pode ficar ainda mais √∫nica e criativa.";
    } else if (pontosTotais === 6) {
      resultado.textContent = "Senha Muito Forte üîí";
      resultado.className = "strength muito";
      extraHint.textContent = "Excelente! Sua senha √© muito segura.";
    } else if (pontosTotais === 7) {
      resultado.textContent = "Senha Lend√°ria ‚ö°";
      resultado.className = "strength lendaria";
      extraHint.textContent = "Parab√©ns! Essa senha √© praticamente invenc√≠vel.";
    }

    if (isCommon) listaDicas.unshift("Evite senhas comuns como '123456' ou 'password'.");
    if (hasSeq) listaDicas.push("Evite sequ√™ncias √≥bvias (ex.: 1234, abcd, qwerty).");
    if (hasRepeat) listaDicas.push("Evite caracteres repetidos em sequ√™ncia (ex.: aaaa, 1111).");
    if (senha.length > 0 && senha.length < 12) listaDicas.push("Use mais de 12 caracteres para maior seguran√ßa.");
    if (!isCreativePassword(senha)) listaDicas.push("Torne sua senha mais criativa ‚Äî misture palavras, s√≠mbolos e n√∫meros de forma √∫nica!");

    dicas.innerHTML = listaDicas.map(d => `<li>${d}</li>`).join("");
  }

  window.addEventListener('load', verificarSenha);
</script>
</body>
</html>
